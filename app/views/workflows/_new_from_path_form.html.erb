<%# Uses rails_bootstrap_form gem. API at: https://github.com/bootstrap-ruby/rails-bootstrap-forms %>

<%= bootstrap_form_for(workflow, url: create_from_path_path) do |f| %>
    <%= f.alert_message "Please fix the errors below." %>

    <div class="panel panel-default">
      <div class="panel-heading">
        Path to source <strong>(Required)</strong>
      </div>
      <div class="panel-body">
        <%= f.text_field :staging_template_dir, label: "Source path", required: true, help: "Enter the path to a directory on the file system." %>

        <div class="form-group">
          <label class="control-label" for="workflow_name">Copy directory to the workflow directory?</label>
          <%= check_box :copy, 'dir', checked_value: 1, unchecked_value: 0, checked: true %>
          <span class="help-block">Unchecking will run this job in-place which is ideal when the directory contains multi-gigabyte files or 1ks of files.</span>
        </div>
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        Job Attributes <strong>(Optional)</strong>
      </div>
      <div class="panel-body">
        <%= f.text_field :name %>

        <%= f.text_field :script_name %>

        <%= f.select :batch_host, OODClusters.map { |cluster| [ "#{cluster.metadata.title}", cluster.id ] }, { label: "Cluster:", :include_blank => true }, { class: "selectpicker", id: "batch_host_select" } %>

        <%= f.text_field :account, help: "Account is an optional field. If not set, the account may be auto-set by the submit filter." %>
      </div>
    </div>

    <%= f.submit 'Save', class: 'btn btn-primary' %>
    <%= f.button 'Reset', type: :reset, class: 'btn btn-default' %>

    <%= link_to 'Back', workflows_path, class: 'btn btn-default' %>
<% end %>
